{"attributes":{"type":"Flow","url":"/services/data/v35.0/tooling/sobjects/Flow/30141000000E3tRAAS"},"Id":"30141000000E3tRAAS","DefinitionId":"30041000000RV2oAAG","MasterLabel":"Display Offers","ManageableState":"unmanaged","VersionNumber":1,"Status":"Active","Description":null,"ProcessType":"AutoLaunchedFlow","CreatedDate":"2017-01-31T19:57:09.000+0000","CreatedById":"00541000000bH0PAAU","LastModifiedDate":"2017-01-31T20:24:22.000+0000","LastModifiedById":"00541000000bH0PAAU","Metadata":{"actionCalls":[],"apexPluginCalls":[],"assignments":[{"assignmentItems":[{"assignToReference":"UnapprovedPricingOptions","operator":"Add","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"PricingOption","numberValue":null,"stringValue":null}},{"assignToReference":"UnapprovedCounter","operator":"Add","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":1.0,"stringValue":null}},{"assignToReference":"TotalCounter","operator":"Add","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":1.0,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"For_Each_PO_0_0"},"description":null,"label":"Add to Unapproved Collection","locationX":1024,"locationY":312,"name":"Add_to_Unapproved_Collection","processMetadataValues":[]},{"assignmentItems":[{"assignToReference":"pricingOptionsApproved","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":null,"description":null,"label":"Set Approved to False","locationX":1402,"locationY":784,"name":"Set_Approved_to_False","processMetadataValues":[]},{"assignmentItems":[{"assignToReference":"pricingOptionsApproved","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":null,"description":null,"label":"Set Approved to False","locationX":606,"locationY":646,"name":"Set_Approved_to_False_0","processMetadataValues":[]},{"assignmentItems":[{"assignToReference":"pricingOptionsApproved","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":true,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":null,"description":null,"label":"Set Approved to True","locationX":938,"locationY":781,"name":"Set_Approved_to_True","processMetadataValues":[]},{"assignmentItems":[{"assignToReference":"pricingOptionsApproved","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":true,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}}],"connector":null,"description":null,"label":"Set Approved to True","locationX":130,"locationY":645,"name":"Set_Approved_to_True_0","processMetadataValues":[]},{"assignmentItems":[{"assignToReference":"TotalCounter","operator":"Add","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":1.0,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"For_Each_PO_0_0"},"description":null,"label":"Set Total Count","locationX":1025,"locationY":164,"name":"Set_Total_Count","processMetadataValues":[]},{"assignmentItems":[{"assignToReference":"MaxDTIRatio","operator":"Assign","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":35.0,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"Get_Pricing_Options"},"description":null,"label":"SetMaxDTI","locationX":357,"locationY":20,"name":"SetMaxDTI","processMetadataValues":[]}],"choices":[],"constants":[],"decisions":[{"defaultConnector":null,"defaultConnectorLabel":"[Default Outcome]","description":null,"label":"Check DTI","locationX":1303,"locationY":169,"name":"Check_DTI","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"PricingOption.DTI__c","operator":"GreaterThan","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"MaxDTIRatio","numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"Add_to_Unapproved_Collection"},"description":null,"label":"Above Max DTI","name":"Above_Max_DTI","processMetadataValues":[]},{"conditionLogic":"and","conditions":[{"leftValueReference":"PricingOption.DTI__c","operator":"LessThanOrEqualTo","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"MaxDTIRatio","numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"Set_Total_Count"},"description":null,"label":"Below Max DTI","name":"Below_Max_DTI","processMetadataValues":[]}]},{"defaultConnector":null,"defaultConnectorLabel":"[Default Outcome]","description":null,"label":"Check for Approved Pricing Options","locationX":1167,"locationY":562,"name":"Check_for_Approved_Pricing_Options","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"TotalCounter","operator":"NotEqualTo","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"UnapprovedCounter","numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"Set_Approved_to_True"},"description":null,"label":"Total count not equal to Deleted count","name":"Total_count_not_equal_to_Deleted_count","processMetadataValues":[]},{"conditionLogic":"and","conditions":[{"leftValueReference":"TotalCounter","operator":"EqualTo","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"UnapprovedCounter","numberValue":null,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"Set_Approved_to_False"},"description":null,"label":"Total Count equals Deleted Count","name":"Total_Count_equals_Deleted_Count","processMetadataValues":[]}]},{"defaultConnector":null,"defaultConnectorLabel":"[Default Outcome]","description":null,"label":"Check for Any Approved Pricing Options","locationX":356,"locationY":421,"name":"Check_for_Approved_Pricing_Options_0","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"TotalCounter","operator":"GreaterThan","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":0.0,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"Set_Approved_to_True_0"},"description":null,"label":"Approved Pricing Options Found","name":"Approved_Pricing_Options_Found","processMetadataValues":[]},{"conditionLogic":"and","conditions":[{"leftValueReference":"TotalCounter","operator":"EqualTo","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":0.0,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"Set_Approved_to_False_0"},"description":null,"label":"No Approved Pricing Options Found","name":"No_Approved_Pricing_Options_Found","processMetadataValues":[]}]},{"defaultConnector":null,"defaultConnectorLabel":"[Default Outcome]","description":null,"label":"Check for Records to Delete","locationX":741,"locationY":418,"name":"Check_for_Records_to_Delete","processMetadataValues":[],"rules":[{"conditionLogic":"and","conditions":[{"leftValueReference":"UnapprovedCounter","operator":"GreaterThan","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":0.0,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"Delete_Unapproved"},"description":null,"label":"Found records to delete","name":"Found_records_to_delete","processMetadataValues":[]},{"conditionLogic":"and","conditions":[{"leftValueReference":"UnapprovedCounter","operator":"EqualTo","processMetadataValues":[],"rightValue":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":0.0,"stringValue":null}}],"connector":{"processMetadataValues":[],"targetReference":"Check_for_Approved_Pricing_Options_0"},"description":null,"label":"No records to Delete","name":"No_records_to_Delete","processMetadataValues":[]}]}],"description":null,"dynamicChoiceSets":[],"formulas":[],"interviewLabel":"Display Offers {!$Flow.CurrentDateTime}","label":"Display Offers","loops":[{"assignNextValueToReference":"PricingOption","collectionReference":"DefaultPricingOptions","description":null,"iterationOrder":"Asc","label":"For Each PO","locationX":740,"locationY":162,"name":"For_Each_PO_0_0","nextValueConnector":{"processMetadataValues":[],"targetReference":"Set_Temp_Collection"},"noMoreValuesConnector":{"processMetadataValues":[],"targetReference":"Check_for_Records_to_Delete"},"processMetadataValues":[]}],"processMetadataValues":[],"processType":"AutoLaunchedFlow","recordCreates":[],"recordDeletes":[{"connector":{"processMetadataValues":[],"targetReference":"Check_for_Approved_Pricing_Options"},"description":null,"faultConnector":null,"filters":[],"inputReference":"UnapprovedPricingOptions","label":"Delete Unapproved","locationX":1167,"locationY":420,"name":"Delete_Unapproved","object":null,"processMetadataValues":[]}],"recordLookups":[{"assignNullValuesIfNoRecordsFound":true,"connector":{"processMetadataValues":[],"targetReference":"For_Each_PO_0_0"},"description":null,"faultConnector":null,"filters":[{"field":"Loan__c","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"loanId","numberValue":null,"stringValue":null}}],"label":"Get Pricing Options","locationX":356,"locationY":162,"name":"Get_Pricing_Options","object":"Pricing_Option__c","outputAssignments":[],"outputReference":"DefaultPricingOptions","processMetadataValues":[],"queriedFields":null,"sortField":null,"sortOrder":null},{"assignNullValuesIfNoRecordsFound":false,"connector":{"processMetadataValues":[],"targetReference":"Check_DTI"},"description":null,"faultConnector":null,"filters":[{"field":"Id","operator":"EqualTo","processMetadataValues":[],"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":"PricingOption.Id","numberValue":null,"stringValue":null}}],"label":"Set Temp Collection","locationX":1023,"locationY":22,"name":"Set_Temp_Collection","object":"Pricing_Option__c","outputAssignments":[{"assignToReference":"PricingOption.DTI__c","field":"DTI__c","processMetadataValues":[]}],"outputReference":null,"processMetadataValues":[],"queriedFields":null,"sortField":null,"sortOrder":null}],"recordUpdates":[],"screens":[],"startElementReference":"SetMaxDTI","steps":[],"subflows":[],"textTemplates":[],"urls":null,"variables":[{"dataType":"Number","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"ApprovedCounter","objectType":null,"processMetadataValues":[],"scale":2,"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":0.0,"stringValue":null}},{"dataType":"SObject","description":null,"isCollection":true,"isInput":false,"isOutput":false,"name":"DefaultPricingOptions","objectType":"Pricing_Option__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"String","description":"The Id of the Loan","isCollection":false,"isInput":true,"isOutput":true,"name":"loanId","objectType":null,"processMetadataValues":[],"scale":null,"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":"a1r41000000fMOt"}},{"dataType":"Number","description":"The max allowed DTI","isCollection":false,"isInput":false,"isOutput":false,"name":"MaxDTIRatio","objectType":null,"processMetadataValues":[],"scale":3,"value":null},{"dataType":"SObject","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"PricingOption","objectType":"Pricing_Option__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"Boolean","description":null,"isCollection":false,"isInput":false,"isOutput":true,"name":"pricingOptionsApproved","objectType":null,"processMetadataValues":[],"scale":null,"value":{"booleanValue":false,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":null,"stringValue":null}},{"dataType":"SObject","description":null,"isCollection":true,"isInput":false,"isOutput":false,"name":"TempPricingOptions","objectType":"Pricing_Option__c","processMetadataValues":[],"scale":null,"value":null},{"dataType":"Number","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"TotalCounter","objectType":null,"processMetadataValues":[],"scale":0,"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":0.0,"stringValue":null}},{"dataType":"Number","description":null,"isCollection":false,"isInput":false,"isOutput":false,"name":"UnapprovedCounter","objectType":null,"processMetadataValues":[],"scale":0,"value":{"booleanValue":null,"dateTimeValue":null,"dateValue":null,"elementReference":null,"numberValue":0.0,"stringValue":null}},{"dataType":"SObject","description":null,"isCollection":true,"isInput":false,"isOutput":true,"name":"UnapprovedPricingOptions","objectType":"Pricing_Option__c","processMetadataValues":[],"scale":null,"value":null}],"waits":[]},"FullName":"Display_Offers-1"}